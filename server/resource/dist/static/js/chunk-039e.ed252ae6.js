(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-039e"],{CYcR:function(t,e,o){"use strict";var r=o("uOrw");o.n(r).a},HAJa:function(t,e,o){"use strict";var r=o("nAmh");o.n(r).a},bPQK:function(t,e,o){"use strict";o.d(e,"a",function(){return r});var r={REGEX_POHONE:/^[1][0-9]$/,REGEX_MAIL:/^(\w)+(\.\w+)*@(\w)+((\.\+w)+)$/,REGEX_PASSWORD:/^[0-9a-zA-Z]+$/,REGEX_ZH_CHAR:/^([\u4e00-\u9fa5]){2,5}$/,MAIL_163_URL:"https://mail.163.com",MAIL_126_URL:"https://mail.126.com",MAIL_QQ_URL:"https://mail.qq.com"}},h6Y3:function(t,e,o){"use strict";o.r(e);var r=o("fe1z"),n=o("42cJ"),a=o("bPQK"),i={name:"ForgotPassword",data:function(){var t=/^[1][3,4,5,7,8][0-9]{9}$/,e=/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/;return{forgotPwdForm:{userphone:"",email:""},forgotPwdRules:{userphone:[{required:!0,trigger:"change",validator:function(e,o,r){""===o?r(new Error("请输入手机号！")):t.test(o)?r():r(new Error("请输入11位有效的手机号！"))}}],email:[{required:!0,trigger:"change",validator:function(t,o,r){""===o?r(new Error("请输入电子邮箱！")):e.test(o)?r():r(new Error("邮箱地址有误！"))}}]},loading:!1,show_contents:0,mailServerUrl:"",btn_name:"返回登录页面",redirect:void 0}},computed:{emailLowcase:function(){return this.forgotPwdForm.email.toLowerCase()}},watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0}},methods:{handleForgotPassword:function(){var t=this;this.$refs.forgotPwdForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0;var o=t.forgotPwdForm.userphone,i=t.emailLowcase;Object(r.a)(o,i).then(function(e){if(console.log(e),t.loading=!1,t.$message({type:"info",message:e.msg,duration:3e3}),e.code===n.a.SUCCESS){t.btn_name="返回登录页面";var o=/@([a-z1-9]{2,3})/.exec(t.emailLowcase);null!==o&&"@163"===o[0]&&(t.mailServerUrl=a.a.MAIL_163_URL,t.btn_name="登录邮箱"),null!==o&&"@126"===o[0]&&(t.mailServerUrl=a.a.MAIL_126_URL,t.btn_name="登录邮箱"),null!==o&&"@qq"===o[0]&&(t.mailServerUrl=a.a.MAIL_QQ_URL,t.btn_name="登录邮箱"),t.show_contents=1}}).catch(function(e){t.loading=!1,console.log(e)})})},handleGotoMailBox:function(){""===this.mailServerUrl?this.$router.push({name:"login"}):(this.$refs.forgotPwdForm.resetFields(),window.location.replace(this.mailServerUrl),this.mailServerUrl="")}}},s=(o("HAJa"),o("CYcR"),o("KHd+")),l=Object(s.a)(i,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"forgot-pwd-container"},[o("div",{directives:[{name:"show",rawName:"v-show",value:0===t.show_contents,expression:"show_contents === 0"}]},[o("el-form",{ref:"forgotPwdForm",staticClass:"forgot-pwd-form",attrs:{model:t.forgotPwdForm,rules:t.forgotPwdRules,"label-position":"left"}},[o("h3",{staticClass:"title"},[t._v("忘记密码")]),t._v(" "),o("el-form-item",{attrs:{prop:"userphone"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"icon_mobilephone"}})],1),t._v(" "),o("el-input",{attrs:{name:"userphone",type:"text",placeholder:"输入注册的手机号",clearable:""},model:{value:t.forgotPwdForm.userphone,callback:function(e){t.$set(t.forgotPwdForm,"userphone",e)},expression:"forgotPwdForm.userphone"}})],1),t._v(" "),o("el-form-item",{ref:"email",attrs:{prop:"email"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"icon_dmail_fill"}})],1),t._v(" "),o("el-input",{attrs:{name:"email",type:"text",placeholder:"输入注册的电子邮箱",clearable:""},model:{value:t.forgotPwdForm.email,callback:function(e){t.$set(t.forgotPwdForm,"email",e)},expression:"forgotPwdForm.email"}})],1),t._v(" "),o("div",{staticStyle:{margin:"0px 0px 15px 0px",color:"#409EFF"}},[o("router-link",{attrs:{to:"/login"}},[t._v("去登录")])],1),t._v(" "),o("el-form-item",[o("el-button",{staticStyle:{width:"100%"},attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleForgotPassword(e)}}},[t._v("申请重置密码")])],1),t._v(" "),o("div",{staticClass:"tips"},[o("span",{staticStyle:{"margin-right":"20px"}},[t._v(":)")])])],1)],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:1===t.show_contents,expression:"show_contents === 1"}]},[o("div",{staticClass:"forgot-pwd-form"},[o("h3",{staticClass:"title"},[t._v("忘记密码")]),t._v(" "),o("el-button",{staticStyle:{width:"100%"},attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleGotoMailBox(e)}}},[t._v(t._s(t.btn_name))]),t._v(" "),o("hr",{attrs:{align:"center",width:"100%",color:"#DCDFE6",size:"1"}}),t._v(" "),t._m(0)],1)])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tips"},[e("span",{staticStyle:{margin:"20px 0px 20px 0px","text-align":"left"}},[this._v("请用户登录自己的邮箱，点击邮件中的链接完成设置新密码")])])}],!1,null,"72cb5f7c",null);l.options.__file="index.vue";e.default=l.exports},nAmh:function(t,e,o){},uOrw:function(t,e,o){}}]);