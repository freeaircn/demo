(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6a45"],{FSZE:function(e,t,a){"use strict";var n=a("Jj1a");a.n(n).a},Jj1a:function(e,t,a){},dU37:function(e,t,a){"use strict";a.r(t);var n=a("t3Un");var s=a("Yfch"),r=a("42cJ"),o={name:"UserSettings",data:function(){return{phone:"",email:"",account_active:"",account_detailed_done:"",userinfo:{username:"",gender:"",political_party:"",company:"",dept_lv10:"",dept_lv20:"",dept_lv30:"",job:""},formRules:{username:[{required:!0,trigger:"change",validator:function(e,t,a){Object(s.b)(t)?a():a(new Error("请输入中文姓名(2~5个汉字)"))}}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],political_party:[{required:!0,message:"请选择党派",trigger:"change"}],company:[{required:!0,message:"请选择公司",trigger:"change"}],dept_lv10:[{required:!0,message:"请选择子公司",trigger:"change"}],dept_lv20:[{required:!0,message:"请选择电厂",trigger:"change"}],dept_lv30:[{required:!0,message:"请选择班组",trigger:"change"}],job:[{required:!0,message:"请选择职务",trigger:"change"}]},content_loading:!0,isUpdateUserBtnDisable:!0,redirect:void 0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},mounted:function(){Object(n.a)({url:"/users/request_user_info",method:"post"}).then(function(e){e.code===r.a.SUCCESS?(this.phone=e.phone,this.email=e.email,this.account_active=e.active,this.account_detailed_done=e.detailed_info_done,this.userinfo.username=e.username,this.userinfo.gender=e.gender,this.userinfo.political_party=e.political_party,this.userinfo.company=e.company,this.userinfo.dept_lv10=e.dept_lv10,this.userinfo.dept_lv20=e.dept_lv20,this.userinfo.dept_lv30=e.dept_lv30,this.userinfo.job=e.job,this.content_loading=!1):this.$message({type:"info",message:"服务器响应异常，请尝试刷新！",showClose:!0})}.bind(this)).catch(function(e){console.log(e),this.$message({type:"info",message:"服务器响应异常，请尝试刷新！！",showClose:!0})})},methods:{userInfoChange:function(){this.isUpdateUserBtnDisable=!1},handleUpdateUserinfo:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;(function(e){return Object(n.a)({url:"/users/update_user_info",method:"post",data:{username:e.username,gender:e.gender,political_party:e.political_party,company:e.company,dept_lv10:e.dept_lv10,dept_lv20:e.dept_lv20,dept_lv30:e.dept_lv30,job:e.job}})})(e.userinfo).then(function(e){e.code===r.a.SUCCESS?(this.isUpdateUserBtnDisable=!0,this.$message({type:"info",message:"用户信息已更新！",duration:3e3})):this.$message({type:"info",message:"服务器更新失败，请重试！",duration:3e3})}.bind(e)).catch(function(e){console.log(e),this.$message({type:"info",message:"服务器更新失败，请重试！！",duration:3e3})})})}}},i=(a("FSZE"),a("KHd+")),l=Object(i.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrapper"},[a("div",{staticClass:"content-container py-3"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.content_loading,expression:"content_loading"}],staticClass:"container-sm px-responsive",attrs:{type:"card"}},[a("el-tab-pane",{attrs:{label:"个人信息"}},[a("el-form",{ref:"form",attrs:{model:e.userinfo,rules:e.formRules,"label-position":"right"}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{name:"username",type:"text",placeholder:"中文姓名",clearable:""},on:{change:function(t){e.userInfoChange()}},model:{value:e.userinfo.username,callback:function(t){e.$set(e.userinfo,"username",t)},expression:"userinfo.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio-group",{on:{change:function(t){e.userInfoChange()}},model:{value:e.userinfo.gender,callback:function(t){e.$set(e.userinfo,"gender",t)},expression:"userinfo.gender"}},[a("el-radio",{attrs:{label:"男"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"女"}},[e._v("女")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"党派",prop:"political_party"}},[a("el-radio-group",{on:{change:function(t){e.userInfoChange()}},model:{value:e.userinfo.political_party,callback:function(t){e.$set(e.userinfo,"political_party",t)},expression:"userinfo.political_party"}},[a("el-radio",{attrs:{label:"1"}},[e._v("无党派")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("中共党员")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("其他党派")])],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"company"}},[a("el-select",{attrs:{placeholder:"请选择所属公司"},on:{change:function(t){e.userInfoChange()}},model:{value:e.userinfo.company,callback:function(t){e.$set(e.userinfo,"company",t)},expression:"userinfo.company"}},[a("el-option",{attrs:{label:"保山能源发展股份有限公司",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"dept_lv10"}},[a("el-select",{attrs:{placeholder:"请选择子公司"},on:{change:function(t){e.userInfoChange()}},model:{value:e.userinfo.dept_lv10,callback:function(t){e.$set(e.userinfo,"dept_lv10",t)},expression:"userinfo.dept_lv10"}},[a("el-option",{attrs:{label:"保山槟榔江水电开发有限公司",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"直属电厂",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"dept_lv20"}},[a("el-select",{attrs:{placeholder:"请选择所属电厂"},on:{change:function(t){e.userInfoChange()}},model:{value:e.userinfo.dept_lv20,callback:function(t){e.$set(e.userinfo,"dept_lv20",t)},expression:"userinfo.dept_lv20"}},[a("el-option",{attrs:{label:"松山河口电厂",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"苏家河口电厂",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"dept_lv30"}},[a("el-select",{attrs:{placeholder:"请选择所属班组"},on:{change:function(t){e.userInfoChange()}},model:{value:e.userinfo.dept_lv30,callback:function(t){e.$set(e.userinfo,"dept_lv30",t)},expression:"userinfo.dept_lv30"}},[a("el-option",{attrs:{label:"检修班",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"运行一班",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"运行二班",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"运行三班",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"运行四班",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"运行五班",value:"6"}}),e._v(" "),a("el-option",{attrs:{label:"办公室",value:"7"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"job"}},[a("el-select",{attrs:{placeholder:"请选择职务"},on:{change:function(t){e.userInfoChange()}},model:{value:e.userinfo.job,callback:function(t){e.$set(e.userinfo,"job",t)},expression:"userinfo.job"}},[a("el-option",{attrs:{label:"检修员",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"运行员",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"班长",value:"3"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{disabled:e.isUpdateUserBtnDisable,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleUpdateUserinfo(t)}}},[e._v("更 新")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"账号管理"}},[e._v("账号管理")])],1)],1),e._v(" "),e._m(0)])},[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"footer-wrapper py-responsive"},[a("div",{staticClass:"footer-container container-xl px-responsive"},[a("div",{staticClass:"pure-g"},[a("div",{staticClass:"pure-u-1 pure-u-lg-1-3 gutter-space-responsive"},[a("h4",[e._v("BE")])]),e._v(" "),a("div",{staticClass:"pure-u-1 pure-u-lg-1-3 gutter-space-responsive"},[a("h4",[e._v("链接")]),e._v(" "),a("a",{staticClass:"footer-link",attrs:{href:"#"}},[e._v("帮助")])]),e._v(" "),a("div",{staticClass:"pure-u-1 pure-u-lg-1-3 gutter-space-responsive"},[a("h4",[e._v("社区")]),e._v(" "),a("a",{staticClass:"footer-link",attrs:{href:"#"}},[e._v("反馈建议")])])]),e._v(" "),a("div",{staticClass:"is-right mt-4"},[a("p",[e._v("© 2019 Freeair Studio.")])])])])}],!1,null,"01cf52d7",null);l.options.__file="settings.vue";t.default=l.exports}}]);