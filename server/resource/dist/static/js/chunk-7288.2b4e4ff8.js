(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7288"],{"/zmP":function(e,t,o){"use strict";var r=o("WvzK");o.n(r).a},"42cJ":function(e,t,o){"use strict";o.d(t,"a",function(){return r});var r={TEST_MSG:"Test message",SUCCESS:0,USERS_SIGNUP_IDENTITY_NOT_EXISTING:201,USERS_SIGNUP_IDENTITY_EXISTING:202,USERS_SIGNUP_EMAIL_NOT_EXISTING:203,USERS_SIGNUP_EMAIL_EXISTING:204,AUTH_TOKEN_PAYLOAD_INVALID:2}},WvzK:function(e,t,o){},h97h:function(e,t,o){"use strict";o.r(t);var r=o("XJYT"),a=o("t3Un");var n=o("42cJ"),s={name:"Signup",data:function(){var e=this,t=/^[1][3,4,5,7,8][0-9]{9}$/,o=/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/,r=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/;return{activeStep:0,formBaseInfo:{userphone:"",email:"",password:"",confirmPassword:""},formBaseInfoRules:{userphone:[{required:!0,trigger:"change",validator:function(e,o,r){""===o?r(new Error("请输入手机号！")):t.test(o)?r():r(new Error("请输入11位有效的手机号！"))}}],email:[{required:!0,trigger:"change",validator:function(e,t,r){""===t?r(new Error("请输入电子邮箱！")):o.test(t)?r():r(new Error("邮箱地址有误！"))}}],password:[{required:!0,trigger:"change",validator:function(t,o,a){""===o?a(new Error("请输入密码")):r.test(o)?(""!==e.formBaseInfo.confirmPassword&&e.$refs.formBaseInfo.validateField("confirmPassword"),a()):a(new Error("密码最小长度为8位，必须包含大写、小写字母、数字！"))}}],confirmPassword:[{required:!0,trigger:"change",validator:function(t,o,r){""===o?r(new Error("请再次输入密码")):o!==e.formBaseInfo.password?r(new Error("两次输入密码不一致!")):r()}}]},formMoreInfo:{username:"",gender:"",parties:"",company:"",deptLevel1:"",deptLevel2:"",job:""},formMoreInfoRules:{},loading:!1,pwdType:"password",redirect:void 0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},checkInfo:function(e){var t=this.formBaseInfo.userphone,o=this.formBaseInfo.email;switch(e){case"phone":/^[1][3,4,5,7,8][0-9]{9}$/.test(t)&&function(e){return Object(a.a)({url:"/users/check_phone",method:"post",data:{phone:e}})}(t).then(function(e){e.code===n.a.USERS_SIGNUP_IDENTITY_EXISTING&&(this.$refs.userphone.resetField(),Object(r.Message)({message:t+" 已被其他用户注册！",showClose:!0,type:"error",duration:3e3}))}.bind(this)).catch(function(e){console.log(e)});break;case"email":/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/.test(o)&&function(e){return Object(a.a)({url:"/users/check_email",method:"post",data:{email:e}})}(o).then(function(e){e.code===n.a.USERS_SIGNUP_EMAIL_EXISTING&&(this.$refs.email.resetField(),Object(r.Message)({message:o+" 已被其他用户注册！",showClose:!0,type:"error",duration:3e3}))}.bind(this)).catch(function(e){console.log(e)})}},handleCreateUser:function(){var e=this;this.$refs.formBaseInfo.validate(function(t){if(!t)return console.log("error submit!!"),!1;var o=e.formBaseInfo.userphone,r=e.formBaseInfo.email,s=e.formBaseInfo.password;e.$confirm("请核对信息"+o+"，"+r+" 是否正确?","提示",{confirmButtonText:"正确",cancelButtonText:"返回",type:"warning"}).then(function(){(function(e,t,o){return Object(a.a)({url:"/users/create_user",method:"post",data:{phone:e,email:t,password:o}})})(o,r,s).then(function(e){e.code===n.a.SUCCESS&&(this.activeStep+=1)}.bind(e)).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消注册"})})})},handleResetBaseInfo:function(){this.$refs.formBaseInfo.resetFields()},handleMoreInfo:function(){this.activeStep>2?this.activeStep=0:this.activeStep+=1},gotoLogin:function(){console.log(this.activeStep),2===this.activeStep?this.activeStep=0:this.activeStep+=1,console.log(this.activeStep)},handleCreateAccount2:function(){var e=this;this.$refs.loginForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0,e.$store.dispatch("Login",e.loginForm).then(function(){e.loading=!1,e.$router.push({path:e.redirect||"/"})}).catch(function(){e.loading=!1})})}}},i=(o("/zmP"),o("s+LX"),o("KHd+")),l=Object(i.a)(s,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"signup-container"},[o("h3",{staticClass:"title"},[e._v("欢迎加入我们")]),e._v(" "),o("el-steps",{staticClass:"signup-steps",attrs:{active:e.activeStep,"finish-status":"success"}},[o("el-step",{attrs:{title:"步骤1",description:"新建用户"}}),e._v(" "),o("el-step",{attrs:{title:"步骤2",description:"用户信息"}}),e._v(" "),o("el-step",{attrs:{title:"步骤3",description:"完成"}})],1),e._v(" "),0===e.activeStep?o("div",{staticClass:"form-baseinfo-container"},[o("el-form",{ref:"formBaseInfo",staticClass:"signup-form",attrs:{model:e.formBaseInfo,rules:e.formBaseInfoRules,"label-position":"left"}},[o("el-form-item",{ref:"userphone",attrs:{prop:"userphone"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"icon_mobilephone"}})],1),e._v(" "),o("el-input",{attrs:{name:"userphone",type:"text",placeholder:"手机号",clearable:""},on:{blur:function(t){e.checkInfo("phone")}},model:{value:e.formBaseInfo.userphone,callback:function(t){e.$set(e.formBaseInfo,"userphone",t)},expression:"formBaseInfo.userphone"}})],1),e._v(" "),o("el-form-item",{ref:"email",attrs:{prop:"email"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"icon_dmail_fill"}})],1),e._v(" "),o("el-input",{attrs:{name:"email",type:"text",placeholder:"电子邮箱",clearable:""},on:{blur:function(t){e.checkInfo("email")}},model:{value:e.formBaseInfo.email,callback:function(t){e.$set(e.formBaseInfo,"email",t)},expression:"formBaseInfo.email"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"password"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),o("el-input",{attrs:{type:e.pwdType,name:"password",placeholder:"密码",clearable:""},model:{value:e.formBaseInfo.password,callback:function(t){e.$set(e.formBaseInfo,"password",t)},expression:"formBaseInfo.password"}}),e._v(" "),o("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[o("svg-icon",{attrs:{"icon-class":"password"===e.pwdType?"eye":"eye-open"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{prop:"confirmPassword"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),o("el-input",{attrs:{type:e.pwdType,name:"confirmPassword",placeholder:"确认密码",clearable:""},model:{value:e.formBaseInfo.confirmPassword,callback:function(t){e.$set(e.formBaseInfo,"confirmPassword",t)},expression:"formBaseInfo.confirmPassword"}}),e._v(" "),o("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[o("svg-icon",{attrs:{"icon-class":"password"===e.pwdType?"eye":"eye-open"}})],1)],1),e._v(" "),o("el-form-item",[o("el-button-group",{staticStyle:{width:"100%"}},[o("el-button",{staticStyle:{width:"50%"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleCreateUser(t)}}},[e._v("注 册")]),e._v(" "),o("el-button",{staticStyle:{width:"50%"},attrs:{loading:e.loading},nativeOn:{click:function(t){return t.preventDefault(),e.handleResetBaseInfo(t)}}},[e._v("重 置")])],1)],1),e._v(" "),o("div",{staticClass:"tips"},[o("p",[e._v("1. 请用户输入自己正确的手机号和电子邮箱")]),e._v(" "),o("p",[e._v("2. 注册后，系统将发送账户激活邮件至用户登记的电子邮箱")]),e._v(" "),o("p",[e._v("3. 激活后，用户将使用手机号登陆")]),e._v(" "),o("p",[e._v("4. 不要用银行密码和支付软件密码作为该账号密码")])])],1)],1):e._e(),e._v(" "),1===e.activeStep?o("div",{staticClass:"form-moreinfo-container"},[o("el-form",{ref:"formMoreInfo",staticClass:"signup-form",attrs:{model:e.formMoreInfo,rules:e.formMoreInfoRules,"label-position":"right"}},[o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{name:"username",type:"text",placeholder:"中文姓名",clearable:""},model:{value:e.formMoreInfo.username,callback:function(t){e.$set(e.formMoreInfo,"username",t)},expression:"formMoreInfo.username"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"性别",prop:"gender"}},[o("el-radio-group",{model:{value:e.formMoreInfo.gender,callback:function(t){e.$set(e.formMoreInfo,"gender",t)},expression:"formMoreInfo.gender"}},[o("el-radio",{attrs:{label:"1"}},[e._v("男")]),e._v(" "),o("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"党派",prop:"parties"}},[o("el-radio-group",{model:{value:e.formMoreInfo.parties,callback:function(t){e.$set(e.formMoreInfo,"parties",t)},expression:"formMoreInfo.parties"}},[o("el-radio",{attrs:{label:"1"}},[e._v("无党派")]),e._v(" "),o("el-radio",{attrs:{label:"2"}},[e._v("中共党员")]),e._v(" "),o("el-radio",{attrs:{label:"3"}},[e._v("其他党派")])],1)],1),e._v(" "),o("el-form-item",{attrs:{prop:"company"}},[o("el-select",{attrs:{placeholder:"请选择所属公司"},model:{value:e.formMoreInfo.company,callback:function(t){e.$set(e.formMoreInfo,"company",t)},expression:"formMoreInfo.company"}},[o("el-option",{attrs:{label:"槟榔江水电开发有限公司",value:"1"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{prop:"deptLevel1"}},[o("el-select",{attrs:{placeholder:"请选择所属电厂"},model:{value:e.formMoreInfo.deptLevel1,callback:function(t){e.$set(e.formMoreInfo,"deptLevel1",t)},expression:"formMoreInfo.deptLevel1"}},[o("el-option",{attrs:{label:"松山河口电厂",value:"1"}}),e._v(" "),o("el-option",{attrs:{label:"XX电厂",value:"2"}}),e._v(" "),o("el-option",{attrs:{label:"XX电厂",value:"3"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{prop:"deptLevel2"}},[o("el-select",{attrs:{placeholder:"请选择所属班组"},model:{value:e.formMoreInfo.deptLevel2,callback:function(t){e.$set(e.formMoreInfo,"deptLevel2",t)},expression:"formMoreInfo.deptLevel2"}},[o("el-option",{attrs:{label:"检修班",value:"1"}}),e._v(" "),o("el-option",{attrs:{label:"办公室",value:"2"}}),e._v(" "),o("el-option",{attrs:{label:"运行一班",value:"3"}}),e._v(" "),o("el-option",{attrs:{label:"运行二班",value:"4"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{prop:"job"}},[o("el-select",{attrs:{placeholder:"请选择职务"},model:{value:e.formMoreInfo.job,callback:function(t){e.$set(e.formMoreInfo,"job",t)},expression:"formMoreInfo.job"}},[o("el-option",{attrs:{label:"运行员",value:"1"}}),e._v(" "),o("el-option",{attrs:{label:"检修员",value:"2"}}),e._v(" "),o("el-option",{attrs:{label:"班长",value:"3"}}),e._v(" "),o("el-option",{attrs:{label:"厂长",value:"4"}}),e._v(" "),o("el-option",{attrs:{label:"助理",value:"5"}})],1)],1),e._v(" "),o("el-form-item",[o("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleMoreInfo(t)}}},[e._v("提 交")]),e._v(" "),o("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading},nativeOn:{click:function(t){return t.preventDefault(),e.handleResetMoreInfo(t)}}},[e._v("重 置")])],1)],1)],1):e._e(),e._v(" "),2===e.activeStep?o("div",[o("h3",{staticStyle:{color:"#2d8cf0","text-align":"center"}},[e._v("完成注册")]),e._v(" "),o("div",{staticStyle:{margin:"20px"}}),e._v(" "),o("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.gotoLogin(t)}}},[e._v("去登录")]),e._v(" "),o("p",{staticStyle:{"font-size":"10px","text-align":"center",color:"#c3c3c3"}},[e._v("请使用手机号登录")])],1):e._e()],1)},[],!1,null,"48004bfd",null);l.options.__file="index.vue";t.default=l.exports},p0dU:function(e,t,o){},"s+LX":function(e,t,o){"use strict";var r=o("p0dU");o.n(r).a}}]);