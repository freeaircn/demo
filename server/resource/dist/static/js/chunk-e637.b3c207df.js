(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e637"],{"/zmP":function(e,s,i){"use strict";var t=i("WvzK");i.n(t).a},DUfC:function(e,s,i){"use strict";var t=i("HNZC");i.n(t).a},HNZC:function(e,s,i){},WvzK:function(e,s,i){},h97h:function(e,s,i){"use strict";i.r(s);var t=i("XJYT"),n=i("t3Un");var o=i("Yfch"),a=i("X4fA"),r=i("42cJ"),c={name:"Signup",data:function(){var e=this;return{isValidCode:!1,isBtnDisable:!1,btnCodeConent:"获取验证码",timer60:"",countdown:60,signupForm:{email:"",verificationCode:"",userphone:"",password:"",confirmPassword:""},signupFormRules:{email:[{required:!0,trigger:"change",validator:function(e,s,i){Object(o.c)(s)?i():i(new Error("请输入有效的邮箱！"))}}],verificationCode:[{required:!0,trigger:"change",validator:function(e,s,i){Object(o.b)(s)?i():i(new Error("请输入5位验证码！"))}}],userphone:[{required:!0,trigger:"change",validator:function(e,s,i){Object(o.e)(s)?i():i(new Error("请输入11位有效的手机号！"))}}],password:[{required:!0,trigger:"change",validator:function(s,i,t){Object(o.d)(i)?(""!==e.signupForm.confirmPassword&&e.$refs.signupForm.validateField("confirmPassword"),t()):t(new Error("密码最小长度为8位，必须包含大写、小写字母、数字！"))}}],confirmPassword:[{required:!0,trigger:"change",validator:function(s,i,t){i!==e.signupForm.password?t(new Error("两次输入密码不一致!")):t()}}]},loading:!1,pwdType:"password",redirect:void 0}},computed:{emailLowcase:function(){return this.signupForm.email.toLowerCase()}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},checkInfo:function(e){var s=this.signupForm.userphone;"phone"===e&&Object(o.e)(s)&&function(e){return Object(n.a)({url:"/users/check_phone",method:"post",data:{phone:e}})}(s).then(function(e){e.code===r.a.USERS_SIGNUP_IDENTITY_EXISTING&&(this.$refs.userphone.resetField(),Object(t.Message)({message:s+e.msg,showClose:!0,type:"error",duration:3e3}))}.bind(this)).catch(function(e){console.log(e)})},diableRequestCodeBtn:function(){var e=this;this.isBtnDisable=!0,this.btnCodeConent="重新发送("+this.countdown+")",this.timer60||(this.timer60=setInterval(function(){e.countdown>0&&e.countdown<=60&&(e.countdown--,0!==e.countdown?e.btnCodeConent="重新发送("+e.countdown+")":(clearInterval(e.timer60),e.isBtnDisable=!1,e.btnCodeConent="获取验证码",e.countdown=60,e.timer60=null))},1e3))},handleRequestCode:function(){if(this.$refs.signupForm.validateField("email"),""===this.$refs.email.validateMessage){this.diableRequestCodeBtn();var e=this.emailLowcase;(function(e){return Object(n.a)({url:"/users/request_code",method:"post",data:{email:e}})})(e).then(function(s){if(s.code===r.a.SUCCESS){var i=Object(a.a)(this.emailLowcase);i?this.$alert("验证码已发送，将在新窗口打开邮箱登录页面","提示",{confirmButtonText:"确定",type:"info"}).then(function(){window.open(i,"_blank")}).catch(function(){console.log("cancel")}):this.$message({type:"info",message:"验证码已发送，请登录用户邮箱查看验证码",duration:3e3})}else s.code===r.a.USERS_SIGNUP_EMAIL_EXISTING?this.$message({type:"info",message:e+s.msg,duration:3e3}):this.$message({type:"info",message:s.msg,duration:3e3})}.bind(this)).catch(function(e){console.log(e),this.$message({type:"info",message:"发送验证码失败，请重新获取!!",duration:3e3})}.bind(this))}},handleVerification:function(){(this.$refs.signupForm.validateField("email"),this.$refs.signupForm.validateField("verificationCode"),""===this.$refs.email.validateMessage+this.$refs.verificationCode.validateMessage)&&function(e,s){return Object(n.a)({url:"/users/check_verification_code",method:"post",data:{email:e,code:s}})}(this.emailLowcase,this.signupForm.verificationCode).then(function(e){e.code===r.a.SUCCESS?(this.$message({type:"info",message:"验证码正确",duration:3e3}),this.isValidCode=!0):this.$message({type:"info",message:e.msg,duration:3e3})}.bind(this)).catch(function(e){console.log(e),this.$message({type:"info",message:"验证码校验失败!!",duration:3e3})}.bind(this))},handleCreateUser:function(){var e=this;this.$refs.signupForm.validate(function(s){if(s){var i=e.signupForm.userphone,t=e.emailLowcase,o=e.signupForm.password;e.$confirm("请确认手机号“"+i+"”是否正确?","提示",{confirmButtonText:"正确",cancelButtonText:"返回",type:"warning"}).then(function(){(function(e,s,i){return Object(n.a)({url:"/users/create_user",method:"post",data:{phone:e,email:s,password:i}})})(i,t,o).then(function(e){e.code===r.a.SUCCESS?this.$router.push({name:"login"}):this.$message({type:"info",message:e.msg,duration:3e3})}.bind(e)).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消注册"})})}})},handleToLogin:function(){this.$router.push({name:"login"})}}},l=(i("/zmP"),i("DUfC"),i("KHd+")),d=Object(l.a)(c,function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"signup-wrapper"},[i("div",{staticClass:"signup-container"},[e._m(0),e._v(" "),i("el-form",{ref:"signupForm",staticClass:"container-sm px-responsive",attrs:{model:e.signupForm,rules:e.signupFormRules,"label-position":"left"}},[i("el-form-item",{ref:"email",attrs:{prop:"email"}},[i("span",{staticClass:"svg-container"},[i("svg-icon",{attrs:{"icon-class":"icon_dmail_fill"}})],1),e._v(" "),i("el-input",{attrs:{disabled:!0===e.isValidCode,name:"email",type:"text",placeholder:"电子邮箱",clearable:""},model:{value:e.signupForm.email,callback:function(s){e.$set(e.signupForm,"email",s)},expression:"signupForm.email"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1===e.isValidCode,expression:"isValidCode === false"}],ref:"verificationCode",attrs:{prop:"verificationCode"}},[i("span",{staticClass:"svg-container"},[i("svg-icon",{attrs:{"icon-class":"verification_code"}})],1),e._v(" "),i("el-input",{staticClass:"code-field",attrs:{type:"text",name:"verificationCode",placeholder:"输入验证码",clearable:""},model:{value:e.signupForm.verificationCode,callback:function(s){e.$set(e.signupForm,"verificationCode",s)},expression:"signupForm.verificationCode"}}),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.btnCodeConent,expression:"btnCodeConent"}],staticClass:"btn-code",attrs:{disabled:e.isBtnDisable,type:"button"},domProps:{value:e.btnCodeConent},on:{click:e.handleRequestCode,input:function(s){s.target.composing||(e.btnCodeConent=s.target.value)}}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!0===e.isValidCode,expression:"isValidCode === true"}],ref:"userphone",attrs:{prop:"userphone"}},[i("span",{staticClass:"svg-container"},[i("svg-icon",{attrs:{"icon-class":"icon_mobilephone"}})],1),e._v(" "),i("el-input",{attrs:{name:"userphone",type:"text",placeholder:"手机号",clearable:""},on:{blur:function(s){e.checkInfo("phone")}},model:{value:e.signupForm.userphone,callback:function(s){e.$set(e.signupForm,"userphone",s)},expression:"signupForm.userphone"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!0===e.isValidCode,expression:"isValidCode === true"}],attrs:{prop:"password"}},[i("span",{staticClass:"svg-container"},[i("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),i("el-input",{attrs:{type:e.pwdType,name:"password",placeholder:"密码",clearable:""},model:{value:e.signupForm.password,callback:function(s){e.$set(e.signupForm,"password",s)},expression:"signupForm.password"}}),e._v(" "),i("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[i("svg-icon",{attrs:{"icon-class":"password"===e.pwdType?"eye":"eye-open"}})],1)],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!0===e.isValidCode,expression:"isValidCode === true"}],attrs:{prop:"confirmPassword"}},[i("span",{staticClass:"svg-container"},[i("svg-icon",{attrs:{"icon-class":"password2"}})],1),e._v(" "),i("el-input",{attrs:{type:e.pwdType,name:"confirmPassword",placeholder:"确认密码",clearable:""},model:{value:e.signupForm.confirmPassword,callback:function(s){e.$set(e.signupForm,"confirmPassword",s)},expression:"signupForm.confirmPassword"}}),e._v(" "),i("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[i("svg-icon",{attrs:{"icon-class":"password"===e.pwdType?"eye":"eye-open"}})],1)],1),e._v(" "),i("div",{staticStyle:{margin:"0px 0px 15px 0px",color:"#409EFF"}},[i("router-link",{attrs:{to:"/login"}},[e._v("已有账号？去登录")])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.isValidCode,expression:"isValidCode === false"}]},[i("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(s){return s.preventDefault(),e.handleVerification(s)}}},[e._v("验 证")])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.isValidCode,expression:"isValidCode === true"}]},[i("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(s){return s.preventDefault(),e.handleCreateUser(s)}}},[e._v("注 册")])],1),e._v(" "),i("div",{staticClass:"tips"},[i("p",[e._v("1. 验证码将发送到输入的邮箱")]),e._v(" "),i("p",[e._v("2. 密码请勿包含银行账号或支付软件密码")]),e._v(" "),i("p",[e._v("3. 注册成功后，请使用手机号登录")])])],1)],1)])},[function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"signup-header py-responsive is-center"},[s("h1",{staticClass:"title"},[this._v("欢迎加入")])])}],!1,null,"46b4769a",null);d.options.__file="index.vue";s.default=d.exports}}]);